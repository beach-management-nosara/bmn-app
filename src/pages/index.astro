---
import { Image } from "astro:assets";

import MainLayout from "@/layouts/main-layout.astro";
import { SearchBox } from "@/components/jsx/search-box";
import ContentSection from "@/components/astro/content-section.astro";

import banner from "@/assets/images/banner.jpg";
import home11 from "@/assets/images/home11.webp";
import home5 from "@/assets/images/home5.jpg";
import home7 from "@/assets/images/home7.webp";
import pochote from "@/assets/images/pochote-banner.jpg";
import shantapura from "@/assets/images/shantapura-banner.jpg";
import terrace from "@/assets/images/terrace_house-21.jpeg";
import treshermanas from "@/assets/images/treshermanas-banner.jpg";

const apiKey = import.meta.env.API_KEY;

const response = await fetch("https://api.lodgify.com/v2/properties", {
    method: "GET",
    headers: {
        "X-ApiKey": apiKey,
        "Content-Type": "application/json"
    }
});
const data = (await response.json()) as {
    items: {
        name: string;
        id: string;
    }[];
};
---

<MainLayout>
    <main class="mx-auto max-w-screen-2xl bg-gray-100">
        <div class="mb-[350px] flex flex-col items-center md:mb-32">
            <div class="relative h-[450px] w-full">
                <Image
                    src={banner}
                    alt="hero"
                    width={662}
                    height={225}
                    format="webp"
                    class="h-[450px] w-full object-cover"
                />

                <div
                    class="absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-center text-white"
                >
                    <h1 class="font-serif text-5xl font-light">Your Dream Vacation Awaits</h1>
                    <h2 class="font-oswald text-3xl font-light">
                        Discover our collection of luxury vacation homes in Nosara, Costa Rica
                    </h2>
                </div>

                <div class="relative bottom-16 mx-auto w-[90%] md:bottom-20">
                    <SearchBox
                        homes={data.items.map(prop => ({ name: prop.name, id: prop.id }))}
                        client:load
                    />
                </div>
            </div>
        </div>

        <div class="-mt-8 md:container">
            <ContentSection
                className="md:px-32"
                isFirstSection
                imgRight
                title="To Beach Management Nosara"
                description="Your premier source for elite, luxury vacation home rentals and management on the Pacific Coast of Costa Rica. Our top-notch team delivers high-class guest services and professional property management to ensure your ultimate satisfaction. Whether you are a guest, owner, or buyer, we are here to assist you every step of the way. Discover the best selection of vacation homes with Beach Management."
                link="/homes"
                linkText="Explore Vacation Homes"
                imageSrc={home11}
                altText="hero"
            />
        </div>

        <ContentSection
            className="md:px-20"
            title="Escape to the breathtaking Nosara, Costa Rica."
            description="Imagine a stunning beach town nestled in the heart of the jungle, surrounded by exotic wildlife and a vibrant multicultural community - that's Nosara. Immerse yourself in nature, enjoy some of the world's most consistent surfing conditions, and create memories that will last a lifetime. With a plethora of amenities and modern comforts, Nosara offers the perfect balance of tranquility and adventure."
            imageSrc={home5}
            altText="hero"
        />

        <ContentSection
            className="md:px-20"
            imgRight
            title="Your first visit won't be your last"
            description="Each of our properties have been handpicked by us and carry their own distinct character and style. Whether you're looking for rustic and authentic or modern and fresh, we're here to help bring your dream vacation to life. We believe that your first visit to one of our properties will be just the beginning of a lifelong relationship. Our clients return year after year, drawn back by the unique charm and comfort of our properties, and reliable guest services throughout their Nosara experience."
            imageSrc={home7}
            altText="hero"
        />

        <div class="flex-col items-center bg-white px-8 py-32 text-center md:flex md:px-20">
            <p class="prose text-primary">Discover our</p>
            <h1 class="prose mb-6 text-5xl font-bold">Featured homes</h1>
            <div class="grid grid-cols-2 gap-8 md:grid-cols-4">
                <div>
                    <Image
                        src={treshermanas}
                        alt="Tres Hermanas"
                        width={241}
                        height={123}
                        format="webp"
                        class="h-32 rounded object-cover shadow"
                    />
                    <p class="prose">Tres Hermanas</p>
                </div>
                <div>
                    <Image
                        src={shantapura}
                        alt="Shanta Pura"
                        width={241}
                        height={161}
                        format="webp"
                        class="h-32 rounded object-cover shadow"
                    />
                    <p class="prose">Shanta Pura</p>
                </div>
                <div>
                    <Image
                        src={terrace}
                        alt="Terrace House"
                        width={241}
                        height={160}
                        format="webp"
                        class="h-32 rounded object-cover shadow"
                    />
                    <p class="prose">Terrace House</p>
                </div>
                <div>
                    <Image
                        src={pochote}
                        alt="Los Pochotes"
                        width={241}
                        height={192}
                        format="webp"
                        class="h-32 rounded object-cover shadow"
                    />
                    <p class="prose">Los Pochotes</p>
                </div>
            </div>
        </div>
    </main>
</MainLayout>
